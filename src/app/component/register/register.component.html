<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Register</title>
    <style>
      .register-form {
        padding: 20px;
        padding-top: 50px;
      }
      .building-image {
        padding: 80px;
      }
      .form-control {
        width: 100%;
        padding: 10px;
        margin-bottom: 10px;
      }
    </style>
  </head>
  <body>
    <div class="container-fluid py-5">
      <div class="row">
        <div class="col-md-6 building-image">
          <ng-lottie [options]="options"></ng-lottie>
        </div>
        <div class="col-md-6">
          <div class="register-form">
            <h2 class="text-primary">Register</h2>
            <form #registerForm="ngForm" (ngSubmit)="register(registerForm)">
              <div class="form-group">
                <label for="username " class="mb-2 text-primary"
                  >Username</label
                >
                <input
                  type="text"
                  class="form-control mb-2"
                  id="username"
                  name="username"
                  [(ngModel)]="username"
                  #inputField (input)="inputField.value = inputField.value.charAt(0).toUpperCase() + inputField.value.slice(1)"
                  required
                  minlength="3"
                  #modelUserName="ngModel"
                  [ngClass]="
                    modelUserName.dirty && modelUserName.invalid
                      ? 'is-invalid'
                      : ''
                  "
                />
                <div
                  *ngIf="modelUserName?.errors?.['required'] && modelUserName.dirty"
                  class="invalid-feedback"
                >
                  please enter username
                </div>
                <div
                  *ngIf="modelUserName.errors?.['minlength']"
                  class="text-danger !"
                >
                  username must be at least 3 characters long.
                </div>
              </div>
              <div class="form-group">
                <label for="contact" class="mb-2 text-primary"
                  >Contact Number</label
                >
                <input
                  type="text"
                  class="form-control mb-2"
                  id="contact"
                  name="contact"
                  [(ngModel)]="contact"
                  required
                  pattern="[0-9]{10}"
                  #modelContact="ngModel"
                  [ngClass]="
                    modelContact.dirty && modelContact.invalid
                      ? 'is-invalid'
                      : ''
                  "
                />
                <div
                  *ngIf="modelContact?.errors?.['required'] && modelContact.dirty"
                  class="invalid-feedback"
                >
                  please enter contact number
                </div>
                <div
                  *ngIf="modelContact.errors?.['pattern']"
                  class="text-danger !"
                >
                  contact number must be 10 digits long and contains only
                  numbers.
                </div>
              </div>
              <div class="form-group">
                <label for="role" class="mb-2 text-primary">Role</label>
                <select
                  class="form-select form-control mb-2"
                  name="selectedRole"
                  [(ngModel)]="selectedRole"
                  required
                  #roleDropdown="ngModel"
                >
                  <option disabled selected>Select a role</option>
                  <option *ngFor="let role of roles.slice(0,2)" [ngValue]="role.role">
                    {{ role.role }}
                  </option>
                </select>
                <div
                  class="invalid-feedback"
                  *ngIf="!selectedRole && !roleDropdown.touched"
                >
                  Please select a role
                </div>
              </div>

              <div class="form-group">
                <label for="password" class="mb-2 text-primary">Password</label>
                <input
                  type="password"
                  class="form-control mb-2"
                  id="password"
                  name="password"
                  [(ngModel)]="password"
                  required
                  minlength="4"
                  #modelPassword="ngModel"
                  [ngClass]="
                    modelPassword.invalid && modelPassword.dirty
                      ? 'is-invalid'
                      : ''
                  "
                />
                <div
                  class="invalid-feedback"
                  *ngIf="modelPassword?.errors?.['minlength']"
                >
                  please enter atleast
                  {{modelPassword?.errors?.['minlength']?.['requiredLength']}}
                  length.
                </div>
                <div
                  class="invalid-feedback"
                  *ngIf="modelPassword?.errors?.['required'] && modelPassword.dirty "
                >
                  Please enter password
                </div>
              </div>
              <div class="form-group">
                <label for="confirmPassword" class="mb-2 text-primary"
                  >Confirm Password</label
                >
                <input
                  type="password"
                  class="form-control mb-2"
                  id="confirmPassword"
                  name="confirmPassword"
                  ngModel
                  required
                  minlength="4"
                  #modelConfirmPassword="ngModel"
                  [ngClass]="
                    modelConfirmPassword.dirty &&
                    modelPassword.value !== modelConfirmPassword.value
                      ? 'is-invalid'
                      : ''"
                />
                <div
                  *ngIf="
                    modelPassword.value !== modelConfirmPassword.value &&
                    modelConfirmPassword.dirty &&
                    modelConfirmPassword.value
                  "
                  class="text-danger"
                  class="invalid-feedback"
                >
                  Password mismatch
                </div>
              </div>
              <button type="submit"   class="btn btn-primary my-3">
                Register
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
